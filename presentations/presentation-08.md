# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–ø–ª–æ–π backend

### –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ —Ç–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤



## üìã –ü–ª–∞–Ω –ª–µ–∫—Ü—ñ—ó

- **üî¨ –û—Å–Ω–æ–≤–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è backend**
- **‚ö° Unit —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ Jest**
- **üîó Integration —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API**
- **üìä Test coverage —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**
- **‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â**
- **‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ —Ö–º–∞—Ä–Ω—ñ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏**
- **üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è**



## ü§î –ù–∞–≤—ñ—â–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ backend?

**üéØ –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏:**
- üîç –í–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –¥–æ production
- üí™ –í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö –∫–æ–¥—É
- üìö –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è –æ—á—ñ–∫—É–≤–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏
- üí∞ –ó–Ω–∏–∂–µ–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –±–∞–≥—ñ–≤

**üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ —É production –∫–æ—à—Ç—É—î –≤ 100 —Ä–∞–∑—ñ–≤ –¥–æ—Ä–æ–∂—á–µ, –Ω—ñ–∂ –Ω–∞ –µ—Ç–∞–ø—ñ —Ä–æ–∑—Ä–æ–±–∫–∏



## üèóÔ∏è –¢–∏–ø–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```mermaid
pyramid
    title –ü—ñ—Ä–∞–º—ñ–¥–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
    section E2E
      —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ workflow : 10
    section Integration
      —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ : 20
    section Unit
      —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π : 70
```

**üß© Unit —Ç–µ—Å—Ç–∏** - –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –æ–∫—Ä–µ–º—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
**üîó Integration —Ç–µ—Å—Ç–∏** - –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –≤–∑–∞—î–º–æ–¥—ñ—é –º—ñ–∂ –º–æ–¥—É–ª—è–º–∏
**üåç E2E —Ç–µ—Å—Ç–∏** - –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞



## üöÄ Jest - –æ—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

**‚ú® –ü–µ—Ä–µ–≤–∞–≥–∏ Jest:**
- ‚ö° –ù—É–ª—å–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏
- üõ†Ô∏è –í–±—É–¥–æ–≤–∞–Ω—ñ assertions —Ç–∞ moking
- üèÉ‚Äç‚ôÇÔ∏è Parallel execution –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- üìä –ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É –∑ –∫–æ—Ä–æ–±–∫–∏
- üì∏ Snapshot —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**üíª –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:**
```bash
npm install --save-dev jest
```



## üß™ –ü–µ—Ä—à–∏–π unit —Ç–µ—Å—Ç

**üîß –¢–µ—Å—Ç–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è:**
```javascript
function calculateTotal(price, tax) {
    if (price < 0 || tax < 0) {
        throw new Error('–¶—ñ–Ω–∞ —Ç–∞ –ø–æ–¥–∞—Ç–æ–∫ –º–∞—é—Ç—å –±—É—Ç–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω–∏–º–∏');
    }
    return price + (price * tax / 100);
}
```

**‚úÖ –¢–µ—Å—Ç:**
```javascript
test('—Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –∑ –ø–æ–¥–∞—Ç–∫–æ–º', () => {
    expect(calculateTotal(100, 20)).toBe(120);
});

test('–≤–∏–∫–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å', () => {
    expect(() => calculateTotal(-10, 20)).toThrow();
});
```

**üìö –¢–µ—Ä–º—ñ–Ω–æ–ª–æ–≥—ñ—è:**
- **Test Case** - –æ–∫—Ä–µ–º–∏–π —Ç–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä—ñ–π
- **Test Suite** - –≥—Ä—É–ø–∞ –ø–æ–≤'—è–∑–∞–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ (describe –±–ª–æ–∫)
- **Assertion** - —Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç



## üìê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—É

**üîÑ –ü–∞—Ç—Ç–µ—Ä–Ω AAA:**
- **üìù Arrange** - –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö —Ç–∞ —É–º–æ–≤
- **‚ö° Act** - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó
- **üîç Assert** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

```javascript
test('—Å—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –≤–∞–ª—ñ–¥–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏', () => {
    // üìù Arrange
    const userData = { name: '–Ü–≤–∞–Ω', email: 'ivan@test.com' };

    // ‚ö° Act
    const user = createUser(userData);

    // üîç Assert
    expect(user.name).toBe('–Ü–≤–∞–Ω');
    expect(user.id).toBeDefined();
});
```



## ‚è∞ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥—É

**üîÑ –ó async/await:**
```javascript
test('–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞', async () => {
    const userId = 123;
    const user = await fetchUser(userId);

    expect(user.id).toBe(userId);
    expect(user.name).toBeDefined();
});
```

**üéÅ –ó Promise:**
```javascript
test('—Å—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ', () => {
    return createUserAsync(userData)
        .then(user => {
            expect(user.email).toBe(userData.email);
        });
});
```



## üé≠ Mocking –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

**‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞:** Unit —Ç–µ—Å—Ç–∏ –Ω–µ –º–∞—é—Ç—å –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

**‚úÖ –†—ñ—à–µ–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è mo–∫—ñ–≤ –¥–ª—è —ñ–º—ñ—Ç–∞—Ü—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```javascript
// üé≠ –ú–æ–∫—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è
jest.mock('./emailService');

test('–≤—ñ–¥–ø—Ä–∞–≤–ª—è—î email –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó', async () => {
    const emailService = require('./emailService');
    emailService.send.mockResolvedValue(true);

    await registerUser('test@example.com');

    expect(emailService.send).toHaveBeenCalledWith(
        'test@example.com',
        '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!'
    );
});
```

**üîç –¢–∏–ø–∏ Test Doubles:**
- **üé≠ Mock** - –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –æ–±'—î–∫—Ç–æ–º
- **üîß Stub** - –ø–æ–≤–µ—Ä—Ç–∞—î –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
- **üë§ Fake** - —Å–ø—Ä–æ—â–µ–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (in-memory database)
- **üïµÔ∏è Spy** - –∑–∞–ø–∏—Å—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∏–∫–ª–∏–∫–∏
- **üé™ Dummy** - –æ–±'—î–∫—Ç–∏-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤



## üîó Integration —Ç–µ—Å—Ç–∏ –¥–ª—è API

**üèóÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
```javascript
const request = require('supertest');
const app = require('../src/app');

describe('Users API', () => {
    beforeEach(async () => {
        // üßπ –û—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
        await clearDatabase();
        await seedTestData();
    });

    test('—Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞', async () => {
        const userData = {
            name: '–¢–µ—Å—Ç –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á',
            email: 'test@example.com'
        };

        const response = await request(app)
            .post('/api/users')
            .send(userData)
            .expect(201);

        expect(response.body.name).toBe(userData.name);
    });
});
```

**üß™ –¢–∏–ø–∏ Integration —Ç–µ—Å—Ç—ñ–≤:**
- **üì° API Testing** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è HTTP endpoints
- **üóÑÔ∏è Database Integration** - —Ç–µ—Å—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–æ—é –ë–î
- **üîó Service Integration** - –≤–∑–∞—î–º–æ–¥—ñ—è –º—ñ–∂ —Å–µ—Ä–≤—ñ—Å–∞–º–∏
- **üìÇ File System Testing** - —Ä–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–∞–º–∏

**üìã Test Lifecycle Hooks:**
- **beforeAll()** - –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ –≤—Å—ñ–º–∞ —Ç–µ—Å—Ç–∞–º–∏
- **beforeEach()** - –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º —Ç–µ—Å—Ç–æ–º
- **afterEach()** - –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
- **afterAll()** - –ø—ñ—Å–ª—è –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤



## üîê –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é

**üé´ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞:**
```javascript
const jwt = require('jsonwebtoken');

function createTestToken(userId) {
    return jwt.sign(
        { userId, email: 'test@example.com' },
        process.env.JWT_SECRET,
        { expiresIn: '1h' }
    );
}

test('–æ—Ç—Ä–∏–º—É—î –ø—Ä–æ—Ñ—ñ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞', async () => {
    const token = createTestToken(1);

    const response = await request(app)
        .get('/api/users/profile')
        .set('Authorization', `Bearer ${token}`)
        .expect(200);

    expect(response.body.id).toBe(1);
});
```



## üìä Test Coverage

**üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è:**
- **üìÑ Lines** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–∫—Ä–∏—Ç–∏—Ö —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É
- **üîß Functions** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–∫—Ä–∏—Ç–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- **üåø Branches** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–∫—Ä–∏—Ç–∏—Ö —É–º–æ–≤–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
- **‚ö° Statements** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–∫—Ä–∏—Ç–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π

**üöÄ –ó–∞–ø—É—Å–∫ –∑ coverage:**
```bash
npm test -- --coverage
```

**üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:** 80-90% –ø–æ–∫—Ä–∏—Ç—Ç—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏

**üìä Coverage –∑–≤—ñ—Ç–∏:**
- **üìÑ Text Report** - –∫–æ–Ω—Å–æ–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥
- **üåê HTML Report** - –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **üìã LCOV** - –¥–ª—è CI/CD —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
- **üìà JSON** - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏

**‚ö†Ô∏è Coverage Anti-patterns:**
- **Vanity metrics** - —Ñ–æ–∫—É—Å –Ω–∞ 100% –∑–∞–º—ñ—Å—Ç—å —è–∫–æ—Å—Ç—ñ
- **Testing implementation** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- **Brittle tests** - —Ç–µ—Å—Ç–∏ —â–æ –ª–∞–º–∞—é—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É



## ü§ñ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GitHub Actions

**‚öôÔ∏è –ë–∞–∑–æ–≤–∏–π workflow (.github/workflows/test.yml):**
```yaml
name: Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:14
        env:
          POSTGRES_PASSWORD: testpass
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: '18'
    - run: npm ci
    - run: npm test
```

**üîÑ CI/CD –¢–µ—Ä–º—ñ–Ω–æ–ª–æ–≥—ñ—è:**
- **üîÑ Pipeline** - –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –µ—Ç–∞–ø—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó
- **üìù Workflow** - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è pipeline –≤ GitHub Actions
- **üèÉ‚Äç‚ôÇÔ∏è Job** - –≥—Ä—É–ø–∞ –∫—Ä–æ–∫—ñ–≤ —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è —Ä–∞–∑–æ–º
- **‚ö° Step** - –æ–∫—Ä–µ–º–∞ –¥—ñ—è –≤ job
- **üéØ Action** - –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- **üé® Matrix Build** - –∑–∞–ø—É—Å–∫ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö/–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- **üîí Secrets** - –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**üìä CI/CD –ú–µ—Ç—Ä–∏–∫–∏:**
- **‚è±Ô∏è Build Time** - —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è pipeline
- **‚úÖ Success Rate** - –≤—ñ–¥—Å–æ—Ç–æ–∫ —É—Å–ø—ñ—à–Ω–∏—Ö builds
- **üîÑ Deployment Frequency** - —á–∞—Å—Ç–æ—Ç–∞ —Ä–µ–ª—ñ–∑—ñ–≤
- **‚ö° Lead Time** - —á–∞—Å –≤—ñ–¥ –∫–æ–º—ñ—Ç—É –¥–æ production



## ‚öôÔ∏è Environment –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

**üìú –ü—Ä–∏–Ω—Ü–∏–ø 12-Factor App:** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π:**
```javascript
// config/index.js
const env = process.env.NODE_ENV || 'development';
const configs = {
    development: require('./development'),
    production: require('./production'),
    test: require('./test')
};

module.exports = configs[env];
```

**üîÑ Development vs Production:**
- üóÑÔ∏è –†—ñ–∑–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- üìù –†—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- üîí –†—ñ–∑–Ω—ñ security –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è



## ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π

**üîç –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Joi –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:**
```javascript
const Joi = require('joi');

const configSchema = Joi.object({
    port: Joi.number().port().required(),
    database: Joi.object({
        host: Joi.string().required(),
        port: Joi.number().port().required(),
        name: Joi.string().required()
    }).required(),
    jwt: Joi.object({
        secret: Joi.string().min(32).required()
    }).required()
});

function validateConfig(config) {
    const { error } = configSchema.validate(config);
    if (error) {
        throw new Error(`Config validation failed: ${error.message}`);
    }
}
```



## üöÑ Railway - –ø—Ä–æ—Å—Ç–∏–π –¥–µ–ø–ª–æ–π

**‚ú® –ü–µ—Ä–µ–≤–∞–≥–∏ Railway:**
- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è Node.js –ø—Ä–æ—î–∫—Ç—ñ–≤
- üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ GitHub
- üîí –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ SSL
- üìä Built-in –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**üìã –ö—Ä–æ–∫–∏ –¥–µ–ø–ª–æ—é:**
1. üîó –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ Railway
2. üèóÔ∏è Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î build
3. ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
4. üåê –û—Ç—Ä–∏–º–∞—Ç–∏ URL –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

**üíª CLI –∫–æ–º–∞–Ω–¥–∏:**
```bash
npm install -g @railway/cli
railway login
railway link
railway up
```

**‚òÅÔ∏è PaaS vs IaaS vs SaaS:**
- **üèóÔ∏è PaaS (Platform as a Service)** - Railway, Heroku
- **üñ•Ô∏è IaaS (Infrastructure as a Service)** - AWS EC2, Digital Ocean Droplets
- **üì± SaaS (Software as a Service)** - –≥–æ—Ç–æ–≤—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏

**üîß Deployment –¢–µ—Ä–º—ñ–Ω–æ–ª–æ–≥—ñ—è:**
- **üöÄ Deploy** - —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- **üîÑ Rolling Update** - –ø–æ—Å—Ç—É–ø–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- **üîµüü¢ Blue-Green** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏
- **üê§ Canary Release** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –º–∞–ª—ñ–π —á–∞—Å—Ç–∏–Ω—ñ
- **üîô Rollback** - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó



## üü£ Heroku —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞

**üîß –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ Heroku:**
- üìÑ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Procfile –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤
- üò¥ Dyno sleep –ø—ñ—Å–ª—è 30 —Ö–≤–∏–ª–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- üíæ Ephemeral filesystem
- üß© Addon ecosystem

**üìÑ Procfile:**
```
web: npm start
worker: node src/worker.js
```

**üêò –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è PostgreSQL:**
```javascript
const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});
```

**üèóÔ∏è Heroku Architecture:**
- **üì¶ Dyno** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- **üîß Buildpack** - —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –∑–±—ñ—Ä–∫–∏
- **üß© Add-on** - –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏ (–ë–î, Redis)
- **üìä Metrics** - –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **üìù Logs** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

**üí∞ Heroku Pricing Tiers:**
- **üÜì Free** - –æ–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ dyno sleep
- **üíº Hobby** - always-on, custom domains
- **üè¢ Professional** - auto-scaling, advanced metrics



## üåä Digital Ocean –≤–∞—Ä—ñ–∞–Ω—Ç–∏

**‚òÅÔ∏è App Platform (PaaS):**
- üîÑ –°—Ö–æ–∂–∏–π –Ω–∞ Heroku –¥–æ—Å–≤—ñ–¥
- üìÑ YAML –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- üìà –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

**üíª Droplets (IaaS):**
- üéõÔ∏è –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–µ—Ä–≤–µ—Ä–æ–º
- üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è PM2 –¥–ª—è process management
- ‚öôÔ∏è –†—É—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è nginx, SSL

**‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è PM2:**
```javascript
module.exports = {
  apps: [{
    name: 'api-server',
    script: './src/server.js',
    instances: 'max',
    exec_mode: 'cluster',
    env_production: {
      NODE_ENV: 'production',
      PORT: 8080
    }
  }]
};
```



## üìù Winston –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è

**‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥–µ—Ä–∞:**
```javascript
const winston = require('winston');

const logger = winston.createLogger({
    level: process.env.LOG_LEVEL || 'info',
    format: winston.format.combine(
        winston.format.timestamp(),
        winston.format.errors({ stack: true }),
        winston.format.json()
    ),
    transports: [
        new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),
        new winston.transports.File({ filename: 'logs/combined.log' })
    ]
});

if (process.env.NODE_ENV !== 'production') {
    logger.add(new winston.transports.Console({
        format: winston.format.simple()
    }));
}
```

**üìä Logging Levels (RFC 5424):**
- **üö® error** - –ø–æ–º–∏–ª–∫–∏ —â–æ –≤–∏–º–∞–≥–∞—é—Ç—å —É–≤–∞–≥–∏
- **‚ö†Ô∏è warn** - –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
- **‚ÑπÔ∏è info** - –∑–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **üîç debug** - –¥–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **üìù verbose** - –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è
- **üéØ silly** - –Ω–∞–π–±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–∏–π —Ä—ñ–≤–µ–Ω—å

**üèóÔ∏è Structured Logging:**
- **JSON —Ñ–æ—Ä–º–∞—Ç** –¥–ª—è –ª–µ–≥–∫–æ—ó –æ–±—Ä–æ–±–∫–∏
- **Correlation ID** –¥–ª—è —Ç—Ä–µ–∫—ñ–Ω–≥—É –∑–∞–ø–∏—Ç—ñ–≤
- **Context fields** - –¥–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **Sanitization** - –≤–∏–¥–∞–ª–µ–Ω–Ω—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö



## üåê HTTP Request Logging

**üîç Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤:**
```javascript
function requestLogger(req, res, next) {
    const start = Date.now();

    res.on('finish', () => {
        const duration = Date.now() - start;

        logger.info('HTTP Request', {
            method: req.method,
            url: req.url,
            statusCode: res.statusCode,
            duration,
            userAgent: req.get('user-agent'),
            ip: req.ip
        });
    });

    next();
}

app.use(requestLogger);
```



## üíö Health Check endpoint

**‚úÖ –ë–∞–∑–æ–≤–∏–π health check:**
```javascript
app.get('/health', async (req, res) => {
    const health = {
        status: 'ok',
        timestamp: new Date().toISOString(),
        uptime: process.uptime(),
        version: process.env.npm_package_version
    };

    try {
        // üóÑÔ∏è –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
        await pool.query('SELECT 1');
        health.database = 'connected';
    } catch (error) {
        health.status = 'error';
        health.database = 'disconnected';
    }

    const statusCode = health.status === 'ok' ? 200 : 503;
    res.status(statusCode).json(health);
});
```

**ü©∫ –¢–∏–ø–∏ Health Checks:**
- **üíö Liveness Probe** - —á–∏ –ø—Ä–∞—Ü—é—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫
- **üìã Readiness Probe** - —á–∏ –≥–æ—Ç–æ–≤–∏–π –ø—Ä–∏–π–º–∞—Ç–∏ —Ç—Ä–∞—Ñ—ñ–∫
- **üöÄ Startup Probe** - —á–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

**üìä Health Check Patterns:**
- **üîç Shallow** - –±–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—É
- **üèä‚Äç‚ôÇÔ∏è Deep** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **‚è±Ô∏è Cached** - –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫
- **üéØ Synthetic** - —ñ–º—ñ—Ç–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –¥—ñ–π



## üö® Error Handling

**üéØ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π error handler:**
```javascript
function errorHandler(error, req, res, next) {
    logger.error('Unhandled error', {
        error: error.message,
        stack: error.stack,
        url: req.url,
        method: req.method,
        userId: req.user?.id
    });

    let statusCode = 500;
    let message = 'Internal server error';

    if (error.name === 'ValidationError') {
        statusCode = 400;
        message = error.message;
    }

    res.status(statusCode).json({ error: message });
}

app.use(errorHandler);
```



## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑ Sentry

**‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Sentry:**
```javascript
const Sentry = require('@sentry/node');

Sentry.init({
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV
});

app.use(Sentry.Handlers.requestHandler());
app.use(Sentry.Handlers.errorHandler());

// üì§ –†—É—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏
function trackError(error, context) {
    Sentry.captureException(error, {
        tags: context,
        user: { id: context.userId }
    });
}
```



## ‚ö° Performance –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**üìä –ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:**
```javascript
function performanceMiddleware(req, res, next) {
    const start = process.hrtime.bigint();

    res.on('finish', () => {
        const duration = Number(process.hrtime.bigint() - start) / 1000000; // ms

        // üì§ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫
        if (duration > 1000) { // –ü–æ–≤—ñ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏
            logger.warn('Slow request', {
                method: req.method,
                url: req.url,
                duration
            });
        }
    });

    next();
}
```



## üóÑÔ∏è Database –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ connection pool:**
```javascript
const pool = new Pool({
    // ... –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    max: 20,
    idleTimeoutMillis: 30000,
    connectionTimeoutMillis: 2000
});

// üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω—É –ø—É–ª—É
setInterval(() => {
    const { totalCount, idleCount, waitingCount } = pool;

    logger.info('Database pool stats', {
        totalConnections: totalCount,
        idleConnections: idleCount,
        waitingConnections: waitingCount
    });

    if (waitingCount > 5) {
        logger.warn('High database connection wait queue');
    }
}, 60000);
```



## üîÑ CI/CD Best Practices

**üìã –ï—Ç–∞–ø–∏ pipeline:**
1. **üìù Code Quality** - linting, formatting
2. **üîí Security** - vulnerability scanning
3. **üß™ Testing** - unit, integration, E2E
4. **üèóÔ∏è Build** - compilation, bundling
5. **üöÄ Deploy** - staging, production
6. **‚úÖ Post-deploy** - smoke tests, monitoring

**üéØ –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó –¥–µ–ø–ª–æ—é:**
- **üîÑ Rolling deployment** - –ø–æ—Å—Ç—É–ø–æ–≤–∞ –∑–∞–º—ñ–Ω–∞ instances
- **üîµüü¢ Blue-green deployment** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏
- **üê§ Canary deployment** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —á–∞—Å—Ç–∏–Ω—ñ —Ç—Ä–∞—Ñ—ñ–∫—É



## üîí Security –≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ

**üîç SAST (Static Analysis):**
```bash
npm audit --audit-level high
npx eslint-plugin-security src/
```

**üì¶ Dependency scanning:**
```yaml
- name: Run Snyk security scan
  uses: snyk/actions/node@master
  env:
    SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
```

**üõ°Ô∏è Integration —Ç–µ—Å—Ç–∏ –±–µ–∑–ø–µ–∫–∏:**
- üö¶ Rate limiting —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- üîê Authentication bypass —Å–ø—Ä–æ–±–∏
- üíâ SQL injection –∑–∞—Ö–∏—Å—Ç
- üåç CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è



## üí° –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

**üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤:**
```
tests/
‚îú‚îÄ‚îÄ unit/           # Unit —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ integration/    # Integration —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ fixtures/       # –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
‚îî‚îÄ‚îÄ helpers/        # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
```

**üìù Naming conventions:**
- üß™ –¢–µ—Å—Ç–∏: `*.test.js` –∞–±–æ `*.spec.js`
- üìÑ Fixtures: `*.fixture.js`
- üé≠ Mocks: `__mocks__/`

**üóÑÔ∏è Test data management:**
- üè≠ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è factory functions
- üßπ Cleanup –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
- üîí –Ü–∑–æ–ª—è—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö



## üêõ Debugging —Ç–µ—Å—Ç—ñ–≤

**üîç Jest debugging:**
```bash
node --inspect-brk node_modules/.bin/jest --runInBand test/specific.test.js
```

**üîß VS Code –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```json
{
    "type": "node",
    "request": "launch",
    "name": "Jest Debug",
    "program": "${workspaceFolder}/node_modules/.bin/jest",
    "args": ["--runInBand"],
    "console": "integratedTerminal"
}
```

**üö© –ö–æ—Ä–∏—Å–Ω—ñ —Ñ–ª–∞–≥–∏:**
- üëÄ `--watch` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- üìù `--verbose` - –¥–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥
- üõë `--bail` - –∑—É–ø–∏–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ



## üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤

**üèÉ‚Äç‚ôÇÔ∏è –ü–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—è:**
- ‚ö° Jest workers –¥–ª—è unit —Ç–µ—Å—Ç—ñ–≤
- üîÑ Parallel CI jobs –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö test suites
- üî™ Test sharding –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤

**üöÄ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ:**
- üíæ In-memory database –¥–ª—è unit —Ç–µ—Å—Ç—ñ–≤
- üìä Shared fixtures –¥–ª—è integration —Ç–µ—Å—Ç—ñ–≤
- üéØ Selective test running (—Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏)

**üóÑÔ∏è –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è test data:**
- üå± Database seeding —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó
- üê≥ Test containers –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó
- üíæ Backup/restore –º–µ—Ö–∞–Ω—ñ–∑–º–∏



## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ production

**üéØ Key metrics:**
- ‚è±Ô∏è **Response time** - —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API
- üöÄ **Throughput** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤/—Å–µ–∫—É–Ω–¥—É
- üö® **Error rate** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–º–∏–ª–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- üíª **Resource utilization** - CPU, –ø–∞–º—è—Ç—å, disk

**üîî Alerting –ø—Ä–∞–≤–∏–ª–∞:**
- üìà Error rate > 5% –ø—Ä–æ—Ç—è–≥–æ–º 5 —Ö–≤–∏–ª–∏–Ω
- ‚è±Ô∏è Response time > 2 —Å–µ–∫—É–Ω–¥–∏ –ø—Ä–æ—Ç—è–≥–æ–º 1 —Ö–≤–∏–ª–∏–Ω–∏
- üóÑÔ∏è Database connections > 80% –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É
- üíæ Memory usage > 90%

**üìä Four Golden Signals (Google SRE):**
- **‚ö° Latency** - —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- üö® **Errors** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫
- üöÄ **Traffic** - –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
- üîã **Saturation** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

**üìà SLI/SLO/SLA:**
- **üìä SLI (Service Level Indicator)** - –º–µ—Ç—Ä–∏–∫–∞ —è–∫–æ—Å—Ç—ñ
- **üéØ SLO (Service Level Objective)** - —Ü—ñ–ª—å–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
- **üìú SLA (Service Level Agreement)** - –¥–æ–≥–æ–≤—ñ—Ä–Ω—ñ –∑–æ–±–æ–≤'—è–∑–∞–Ω–Ω—è

**üîç Observability Pillars:**
- **üìù Logs** - –ø–æ–¥—ñ—ó —â–æ –≤—ñ–¥–±—É–ª–∏—Å—è
- **üìä Metrics** - —á–∏—Å–ª–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏
- **üîç Traces** - —à–ª—è—Ö –∑–∞–ø–∏—Ç—É —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É



## üî• Test-Driven Development (TDD)

```mermaid
graph LR
    A[üî¥ Red: Write failing test] --> B[üü¢ Green: Make it pass]
    B --> C[üîµ Refactor: Improve code]
    C --> A
```

**üîÑ TDD –¶–∏–∫–ª:**
1. **üî¥ Red** - –Ω–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç —â–æ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
2. **üü¢ Green** - –Ω–∞–ø–∏—Å–∞—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è
3. **üîµ Refactor** - –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –∫–æ–¥ –∑–±–µ—Ä—ñ–≥—à–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

**üìö TDD –ü—Ä–∏–Ω—Ü–∏–ø–∏:**
- **YAGNI** - You Aren't Gonna Need It
- **KISS** - Keep It Simple, Stupid
- **DRY** - Don't Repeat Yourself
- **SOLID** - –ø—Ä–∏–Ω—Ü–∏–ø–∏ –æ–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω—É

**‚öñÔ∏è TDD vs BDD:**
- **üß™ TDD** - Test-Driven Development (—Ç–µ—Ö–Ω—ñ—á–Ω–∏–π —Ñ–æ–∫—É—Å)
- **üìã BDD** - Behavior-Driven Development (–±—ñ–∑–Ω–µ—Å —Ñ–æ–∫—É—Å)



## üîí Security Testing

**üõ°Ô∏è SAST vs DAST:**
- **üîç SAST (Static)** - –∞–Ω–∞–ª—ñ–∑ –∫–æ–¥—É –±–µ–∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **üéØ DAST (Dynamic)** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—é—á–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

**üîß Security Testing Tools:**
```bash
# Vulnerability scanning
npm audit --audit-level high
npx snyk test

# Code quality
npx eslint-plugin-security src/
npx semgrep --config=auto src/
```

**üéØ OWASP Top 10 Testing:**
- **üíâ Injection** - SQL, NoSQL, Command injection
- **üîê Broken Authentication** - session management
- **üìä Sensitive Data Exposure** - encryption, storage
- **üåê XXE** - XML External Entities
- **üö´ Broken Access Control** - authorization flaws

**üîí Security Headers Testing:**
- **üõ°Ô∏è HSTS** - HTTP Strict Transport Security
- **üé≠ CSP** - Content Security Policy
- **üö´ X-Frame-Options** - clickjacking protection
- **üîí X-Content-Type-Options** - MIME type sniffing



## üìä Performance Testing

**‚ö° Types of Performance Testing:**
- **üìà Load Testing** - –Ω–æ—Ä–º–∞–ª—å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **üöÄ Stress Testing** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **üí• Spike Testing** - —Ä—ñ–∑–∫—ñ —Å—Ç—Ä–∏–±–∫–∏ —Ç—Ä–∞—Ñ—ñ–∫—É
- **‚è±Ô∏è Volume Testing** - –≤–µ–ª–∏–∫—ñ –æ–±—Å—è–≥–∏ –¥–∞–Ω–∏—Ö
- **üîÑ Endurance Testing** - —Ç—Ä–∏–≤–∞–ª–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

**üìä Performance Metrics:**
- **‚è±Ô∏è Response Time** - —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- **üöÄ Throughput** - requests per second
- **üë• Concurrent Users** - –æ–¥–Ω–æ—á–∞—Å–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- **üìà CPU/Memory Usage** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- **üóÑÔ∏è Database Performance** - query execution time

**üõ†Ô∏è Performance Testing Tools:**
- **Artillery** - load testing for APIs
- **k6** - modern load testing
- **Apache JMeter** - comprehensive testing
- **Lighthouse** - web performance auditing

**üîë –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏:**
- üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ—Ü–µ—Å—É —Ä–æ–∑—Ä–æ–±–∫–∏
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
- üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å
- üìà –ü–æ—Å—Ç—É–ø–æ–≤–µ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è best practices

**üõ†Ô∏è –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –ø–æ—á–∞—Ç–∫—É:**
- üß™ Jest –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- ü§ñ GitHub Actions –¥–ª—è CI/CD
- ‚òÅÔ∏è Railway/Heroku –¥–ª—è –¥–µ–ø–ª–æ—é
- üìù Winston –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
- üîç Sentry –¥–ª—è error tracking

**üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:** –ø—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç–∞—Ö



## ‚ùì –ó–∞–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è

**üí¨ –¢–µ–º–∏ –¥–ª—è –¥–∏—Å–∫—É—Å—ñ—ó:**
- üìä –î–æ—Å–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏ –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º
- ‚òÅÔ∏è –í–∏–±—ñ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –¥–ª—è –¥–µ–ø–ª–æ—é
- üìà –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- üéØ Challenges —É production

**üìö –ö–æ—Ä–∏—Å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏:**
- üìñ Jest Documentation
- ü§ñ GitHub Actions Marketplace
- ‚òÅÔ∏è Cloud Platform Docs
- üìä Monitoring Best Practices        node-version: '18'
    - run: npm ci
    - run: npm test
```



## ‚öôÔ∏è Environment –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

**üìú –ü—Ä–∏–Ω—Ü–∏–ø 12-Factor App:** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π:**
```javascript
// config/index.js
const env = process.env.NODE_ENV || 'development';
const configs = {
    development: require('./development'),
    production: require('./production'),
    test: require('./test')
};

module.exports = configs[env];
```

**üîÑ Development vs Production:**
- üóÑÔ∏è –†—ñ–∑–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- üìù –†—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- üîí –†—ñ–∑–Ω—ñ security –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è



## –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Joi –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:**
```javascript
const Joi = require('joi');

const configSchema = Joi.object({
    port: Joi.number().port().required(),
    database: Joi.object({
        host: Joi.string().required(),
        port: Joi.number().port().required(),
        name: Joi.string().required()
    }).required(),
    jwt: Joi.object({
        secret: Joi.string().min(32).required()
    }).required()
});

function validateConfig(config) {
    const { error } = configSchema.validate(config);
    if (error) {
        throw new Error(`Config validation failed: ${error.message}`);
    }
}
```



## Railway - –ø—Ä–æ—Å—Ç–∏–π –¥–µ–ø–ª–æ–π

**–ü–µ—Ä–µ–≤–∞–≥–∏ Railway:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è Node.js –ø—Ä–æ—î–∫—Ç—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ GitHub
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ SSL
- Built-in –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**–ö—Ä–æ–∫–∏ –¥–µ–ø–ª–æ—é:**
1. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ Railway
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î build
3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
4. –û—Ç—Ä–∏–º–∞—Ç–∏ URL –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

**CLI –∫–æ–º–∞–Ω–¥–∏:**
```bash
npm install -g @railway/cli
railway login
railway link
railway up
```



## Heroku —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ Heroku:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Procfile –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤
- Dyno sleep –ø—ñ—Å–ª—è 30 —Ö–≤–∏–ª–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- Ephemeral filesystem
- Addon ecosystem

**Procfile:**
```
web: npm start
worker: node src/worker.js
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è PostgreSQL:**
```javascript
const pool = new Pool({
    connectionString: process.env.DATABASE_URL,
    ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});
```



## Digital Ocean –≤–∞—Ä—ñ–∞–Ω—Ç–∏

**App Platform (PaaS):**
- –°—Ö–æ–∂–∏–π –Ω–∞ Heroku –¥–æ—Å–≤—ñ–¥
- YAML –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

**Droplets (IaaS):**
- –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–µ—Ä–≤–µ—Ä–æ–º
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è PM2 –¥–ª—è process management
- –†—É—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è nginx, SSL

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è PM2:**
```javascript
module.exports = {
  apps: [{
    name: 'api-server',
    script: './src/server.js',
    instances: 'max',
    exec_mode: 'cluster',
    env_production: {
      NODE_ENV: 'production',
      PORT: 8080
    }
  }]
};
```



## Winston –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥–µ—Ä–∞:**
```javascript
const winston = require('winston');

const logger = winston.createLogger({
    level: process.env.LOG_LEVEL || 'info',
    format: winston.format.combine(
        winston.format.timestamp(),
        winston.format.errors({ stack: true }),
        winston.format.json()
    ),
    transports: [
        new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),
        new winston.transports.File({ filename: 'logs/combined.log' })
    ]
});

if (process.env.NODE_ENV !== 'production') {
    logger.add(new winston.transports.Console({
        format: winston.format.simple()
    }));
}
```



## HTTP Request Logging

**Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤:**
```javascript
function requestLogger(req, res, next) {
    const start = Date.now();

    res.on('finish', () => {
        const duration = Date.now() - start;

        logger.info('HTTP Request', {
            method: req.method,
            url: req.url,
            statusCode: res.statusCode,
            duration,
            userAgent: req.get('user-agent'),
            ip: req.ip
        });
    });

    next();
}

app.use(requestLogger);
```



## Health Check endpoint

**–ë–∞–∑–æ–≤–∏–π health check:**
```javascript
app.get('/health', async (req, res) => {
    const health = {
        status: 'ok',
        timestamp: new Date().toISOString(),
        uptime: process.uptime(),
        version: process.env.npm_package_version
    };

    try {
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
        await pool.query('SELECT 1');
        health.database = 'connected';
    } catch (error) {
        health.status = 'error';
        health.database = 'disconnected';
    }

    const statusCode = health.status === 'ok' ? 200 : 503;
    res.status(statusCode).json(health);
});
```



## Error Handling

**–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π error handler:**
```javascript
function errorHandler(error, req, res, next) {
    logger.error('Unhandled error', {
        error: error.message,
        stack: error.stack,
        url: req.url,
        method: req.method,
        userId: req.user?.id
    });

    let statusCode = 500;
    let message = 'Internal server error';

    if (error.name === 'ValidationError') {
        statusCode = 400;
        message = error.message;
    }

    res.status(statusCode).json({ error: message });
}

app.use(errorHandler);
```



## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑ Sentry

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Sentry:**
```javascript
const Sentry = require('@sentry/node');

Sentry.init({
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV
});

app.use(Sentry.Handlers.requestHandler());
app.use(Sentry.Handlers.errorHandler());

// –†—É—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏
function trackError(error, context) {
    Sentry.captureException(error, {
        tags: context,
        user: { id: context.userId }
    });
}
```



## Performance –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**–ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:**
```javascript
function performanceMiddleware(req, res, next) {
    const start = process.hrtime.bigint();

    res.on('finish', () => {
        const duration = Number(process.hrtime.bigint() - start) / 1000000; // ms

        // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫
        if (duration > 1000) { // –ü–æ–≤—ñ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏
            logger.warn('Slow request', {
                method: req.method,
                url: req.url,
                duration
            });
        }
    });

    next();
}
```



## Database –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

**–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ connection pool:**
```javascript
const pool = new Pool({
    // ... –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    max: 20,
    idleTimeoutMillis: 30000,
    connectionTimeoutMillis: 2000
});

// –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω—É –ø—É–ª—É
setInterval(() => {
    const { totalCount, idleCount, waitingCount } = pool;

    logger.info('Database pool stats', {
        totalConnections: totalCount,
        idleConnections: idleCount,
        waitingConnections: waitingCount
    });

    if (waitingCount > 5) {
        logger.warn('High database connection wait queue');
    }
}, 60000);
```



## CI/CD Best Practices

**–ï—Ç–∞–ø–∏ pipeline:**
1. **Code Quality** - linting, formatting
2. **Security** - vulnerability scanning
3. **Testing** - unit, integration, E2E
4. **Build** - compilation, bundling
5. **Deploy** - staging, production
6. **Post-deploy** - smoke tests, monitoring

**–°—Ç—Ä–∞—Ç–µ–≥—ñ—ó –¥–µ–ø–ª–æ—é:**
- **Rolling deployment** - –ø–æ—Å—Ç—É–ø–æ–≤–∞ –∑–∞–º—ñ–Ω–∞ instances
- **Blue-green deployment** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏
- **Canary deployment** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —á–∞—Å—Ç–∏–Ω—ñ —Ç—Ä–∞—Ñ—ñ–∫—É



## Security –≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ

**SAST (Static Analysis):**
```bash
npm audit --audit-level high
npx eslint-plugin-security src/
```

**Dependency scanning:**
```yaml
- name: Run Snyk security scan
  uses: snyk/actions/node@master
  env:
    SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
```

**Integration —Ç–µ—Å—Ç–∏ –±–µ–∑–ø–µ–∫–∏:**
- Rate limiting —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- Authentication bypass —Å–ø—Ä–æ–±–∏
- SQL injection –∑–∞—Ö–∏—Å—Ç
- CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è



## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤:**
```
tests/
‚îú‚îÄ‚îÄ unit/           # Unit —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ integration/    # Integration —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ fixtures/       # –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
‚îî‚îÄ‚îÄ helpers/        # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
```

**Naming conventions:**
- –¢–µ—Å—Ç–∏: `*.test.js` –∞–±–æ `*.spec.js`
- Fixtures: `*.fixture.js`
- Mocks: `__mocks__/`

**Test data management:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è factory functions
- Cleanup –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
- –Ü–∑–æ–ª—è—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö



## Debugging —Ç–µ—Å—Ç—ñ–≤

**Jest debugging:**
```bash
node --inspect-brk node_modules/.bin/jest --runInBand test/specific.test.js
```

**VS Code –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```json
{
    "type": "node",
    "request": "launch",
    "name": "Jest Debug",
    "program": "${workspaceFolder}/node_modules/.bin/jest",
    "args": ["--runInBand"],
    "console": "integratedTerminal"
}
```

**–ö–æ—Ä–∏—Å–Ω—ñ —Ñ–ª–∞–≥–∏:**
- `--watch` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- `--verbose` - –¥–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥
- `--bail` - –∑—É–ø–∏–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ



## –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤

**–ü–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—è:**
- Jest workers –¥–ª—è unit —Ç–µ—Å—Ç—ñ–≤
- Parallel CI jobs –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö test suites
- Test sharding –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ:**
- In-memory database –¥–ª—è unit —Ç–µ—Å—Ç—ñ–≤
- Shared fixtures –¥–ª—è integration —Ç–µ—Å—Ç—ñ–≤
- Selective test running (—Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏)

**–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è test data:**
- Database seeding —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó
- Test containers –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó
- Backup/restore –º–µ—Ö–∞–Ω—ñ–∑–º–∏



## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ production

**Key metrics:**
- **Response time** - —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API
- **Throughput** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤/—Å–µ–∫—É–Ω–¥—É
- **Error rate** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–º–∏–ª–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- **Resource utilization** - CPU, –ø–∞–º—è—Ç—å, disk

**Alerting –ø—Ä–∞–≤–∏–ª–∞:**
- Error rate > 5% –ø—Ä–æ—Ç—è–≥–æ–º 5 —Ö–≤–∏–ª–∏–Ω
- Response time > 2 —Å–µ–∫—É–Ω–¥–∏ –ø—Ä–æ—Ç—è–≥–æ–º 1 —Ö–≤–∏–ª–∏–Ω–∏
- Database connections > 80% –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É
- Memory usage > 90%



## –í–∏—Å–Ω–æ–≤–∫–∏

**–ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏:**
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ—Ü–µ—Å—É —Ä–æ–∑—Ä–æ–±–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å
- –ü–æ—Å—Ç—É–ø–æ–≤–µ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è best practices

**–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –ø–æ—á–∞—Ç–∫—É:**
- Jest –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- GitHub Actions –¥–ª—è CI/CD
- Railway/Heroku –¥–ª—è –¥–µ–ø–ª–æ—é
- Winston –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
- Sentry –¥–ª—è error tracking
